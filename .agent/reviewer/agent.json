{
  "$schema": "../../agents/schemas/agent.schema.json",
  "version": "1.12.0",
  "name": "reviewer",
  "displayName": "Reviewer Agent",
  "description": "Autonomous review agent that verifies implementation against requirements for a GitHub Issue",
  "parameters": {
    "issue": {
      "type": "number",
      "description": "GitHub Issue number to review",
      "required": true,
      "cli": "--issue"
    },
    "iterateMax": {
      "type": "number",
      "description": "Maximum number of iterations (fallback)",
      "required": false,
      "default": 300,
      "cli": "--iterate-max"
    },
    "branch": {
      "type": "string",
      "description": "Working branch name for worktree mode",
      "required": false,
      "cli": "--branch"
    },
    "baseBranch": {
      "type": "string",
      "description": "Base branch (merge target) for worktree mode",
      "required": false,
      "cli": "--base-branch"
    }
  },
  "runner": {
    "flow": {
      "systemPromptPath": "prompts/system.md",
      "prompts": {
        "registry": "steps_registry.json",
        "fallbackDir": "prompts/"
      }
    },
    "completion": {
      "type": "externalState",
      "config": {
        "type": "issueClose",
        "issueParam": "issue",
        "maxIterations": 300
      }
    },
    "boundaries": {
      "allowedTools": ["Skill", "Read", "Glob", "Grep", "Bash", "WebFetch", "Task"],
      "permissionMode": "acceptEdits",
      "github": {
        "enabled": true,
        "labels": {
          "requirements": "docs",
          "review": "review",
          "gap": "implementation-gap"
        }
      },
      "actions": {
        "enabled": true,
        "types": ["review-action"],
        "outputFormat": "json"
      }
    },
    "execution": {
      "worktree": {
        "enabled": true,
        "root": "../worktree"
      }
    },
    "telemetry": {
      "logging": {
        "directory": "tmp/logs/agents/reviewer",
        "format": "jsonl",
        "maxFiles": 100
      }
    }
  }
}
