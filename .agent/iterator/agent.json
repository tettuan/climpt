{
  "$schema": "../../agents/schemas/agent.schema.json",
  "version": "1.12.0",
  "name": "iterator",
  "displayName": "Iterator Agent",
  "description": "Autonomous development agent that works on GitHub Issues/Projects in iteration cycles",
  "parameters": {
    "issue": {
      "type": "number",
      "description": "GitHub Issue number to work on",
      "required": true,
      "cli": "--issue"
    },
    "iterateMax": {
      "type": "number",
      "description": "Maximum number of iterations (fallback)",
      "required": false,
      "default": 500,
      "cli": "--iterate-max"
    },
    "resume": {
      "type": "boolean",
      "description": "Resume previous session",
      "required": false,
      "default": false,
      "cli": "--resume"
    },
    "branch": {
      "type": "string",
      "description": "Working branch name for worktree mode",
      "required": false,
      "cli": "--branch"
    },
    "baseBranch": {
      "type": "string",
      "description": "Base branch (merge target) for worktree mode",
      "required": false,
      "cli": "--base-branch"
    }
  },
  "runner": {
    "flow": {
      "systemPromptPath": "prompts/system.md",
      "prompts": {
        "registry": "steps_registry.json",
        "fallbackDir": "prompts/"
      }
    },
    "completion": {
      "type": "externalState",
      "config": {
        "maxIterations": 500
      }
    },
    "boundaries": {
      "allowedTools": [
        "Skill",
        "Read",
        "Write",
        "Edit",
        "Bash",
        "Glob",
        "Grep",
        "Task",
        "TodoWrite"
      ],
      "permissionMode": "acceptEdits"
    },
    "integrations": {
      "github": {
        "enabled": true,
        "labels": {
          "requirements": "docs",
          "inProgress": "in-progress",
          "blocked": "need clearance",
          "completion": {
            "add": ["done"],
            "remove": ["in-progress"]
          }
        },
        "defaultClosureAction": "label-only"
      }
    },
    "actions": {
      "enabled": true,
      "types": ["issue-action", "project-plan", "review-result"],
      "outputFormat": "json"
    },
    "execution": {
      "worktree": {
        "enabled": true,
        "root": "../worktree"
      }
    },
    "logging": {
      "directory": "tmp/logs/agents/iterator",
      "format": "jsonl",
      "maxFiles": 100
    }
  }
}
