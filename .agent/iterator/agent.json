{
  "$schema": "../../agents/schemas/agent.schema.json",
  "version": "1.10.0",
  "name": "iterator",
  "displayName": "Iterator Agent",
  "description": "Autonomous development agent that works on GitHub Issues/Projects in iteration cycles",
  "behavior": {
    "systemPromptPath": "prompts/system.md",
    "completionType": "externalState",
    "completionConfig": {
      "maxIterations": 500
    },
    "allowedTools": ["Skill", "Read", "Write", "Edit", "Bash", "Glob", "Grep", "Task", "TodoWrite"],
    "permissionMode": "acceptEdits",
    "preCloseValidation": {
      "enabled": true,
      "validators": ["git-clean"],
      "onFailure": "block"
    }
  },
  "parameters": {
    "issue": {
      "type": "number",
      "description": "GitHub Issue number to work on",
      "required": true,
      "cli": "--issue"
    },
    "iterateMax": {
      "type": "number",
      "description": "Maximum number of iterations (fallback)",
      "required": false,
      "default": 500,
      "cli": "--iterate-max"
    },
    "resume": {
      "type": "boolean",
      "description": "Resume previous session",
      "required": false,
      "default": false,
      "cli": "--resume"
    },
    "branch": {
      "type": "string",
      "description": "Working branch name for worktree mode",
      "required": false,
      "cli": "--branch"
    },
    "baseBranch": {
      "type": "string",
      "description": "Base branch (merge target) for worktree mode",
      "required": false,
      "cli": "--base-branch"
    }
  },
  "prompts": {
    "registry": "steps_registry.json",
    "fallbackDir": "prompts/"
  },
  "actions": {
    "enabled": true,
    "types": ["issue-action", "project-plan", "review-result"],
    "outputFormat": "json"
  },
  "github": {
    "enabled": true,
    "labels": {
      "requirements": "docs",
      "inProgress": "in-progress",
      "blocked": "need clearance"
    }
  },
  "worktree": {
    "enabled": true,
    "root": "../worktree"
  },
  "logging": {
    "directory": "tmp/logs/agents/iterator",
    "format": "jsonl",
    "maxFiles": 100
  }
}
