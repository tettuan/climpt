# Climpt

A CLI tool for managing prompts and AI interactions - a wrapper around the breakdown package.

## Overview

Climpt is a command-line interface tool that serves as a wrapper around the `@tettuan/breakdown` JSR package. It provides a unified interface for AI-assisted development instruction tools, enabling developers to create, manage, and execute development instructions using TypeScript and JSON Schema for AI system interpretation.

This tool is designed to work in conjunction with AI Coding agents, specifically optimized for Cursor (the author's primary tool). The underlying AI model is assumed to be Claude-4-sonnet, though the syntax and structure are designed to be easily interpretable by other AI models.

## Installation

### Recommended: Install as CLI

Climpt is primarily designed to be used as a CLI tool. You can install it using the official Deno/JSR method:

```bash
deno install --allow-read --allow-write --allow-net --allow-env --global climpt jsr:@aidevtool/climpt
```

- `--allow-read`: Allow reading files and directories (required for input files)
- `--allow-write`: Allow writing files and directories (required for output generation)

# Climpt

A CLI tool for managing prompts and AI interactions - a wrapper around the breakdown package.

## Overview

Climpt allows you to select from a set of prepared prompts and call the desired prompt with a single command, outputting the result. You can pass values to be inserted into the prompt as command-line arguments.

Example usage:
```sh
# Create new tests based on a bug report
cat bug_report.md | climpt-build new test --input=bug

# Detailed breakdown from issue to task
climpt-breakdown to task --input=issue --from=github_issue_123.md --adaptation=detailed --uv-storypoint=5
```

Climpt provides a unified interface for AI-assisted development instruction tools, enabling the creation, management, and execution of development instructions interpretable by AI systems using TypeScript and JSON Schema.

This tool is designed to work in conjunction with AI coding agents, especially optimized for Cursor and Claude. The underlying AI model is assumed to be Claude, but the syntax and structure are designed to be easily interpretable by other AI models as well.

## Installation

### Recommended: Install as CLI

Climpt is primarily intended to be used as a CLI tool. You can install it using the official Deno/JSR method:

```bash
deno install --allow-read --allow-write --allow-net --allow-env --global climpt jsr:@aidevtool/climpt
```

- `--allow-read`: Allow reading files and directories (required for input files)
- `--allow-write`: Allow writing files and directories (required for output generation)
- `--allow-net`: Allow network access (required for downloading breakdown package from JSR)
- `--allow-env`: Allow environment variable access (required for configuration)
- `-f`: Force overwrite existing command
- `--global`: Install globally
- `climpt`: Command name

> **Note:**
> While `-A` (allow all permissions) can be used for convenience, it is recommended to use specific permission flags as shown above for better security.
> The CLI module must be specified as `jsr:@aidevtool/climpt`.
> This is based on the `exports` configuration in `deno.json`.

## Usage

After installation, you can use the climpt command directly:

```bash
climpt --help
climpt init
climpt to project --config=custom
```

Climpt provides access to all breakdown package functionality through a simple wrapper interface.
(In the future, feature development itself will be migrated from Breakdown to Climpt.)

## Key Features

- Optimized Markdown conversion prompts
- JSON Schema syntax for AI systems
- Wrapper interface for the breakdown package
- Support for various output formats (Markdown/JSON/YAML)

## Purpose

To provide a standardized way to express development requirements, bridging the gap between human-written specifications and AI-interpretable instructions.

This tool itself does not generate documents based on rules. It supports AI document generation by providing prompts and structured formats that are easy for AI to interpret and handle.

## Use Cases

Select from various prompts and obtain the desired prompt with a single command. The main use cases are:

- Centralized management of patterned prompts
- Dynamic invocation from CLI agents like Claude Code
- Building processing flows by mediating prompts in chained operations
- Using refined prompt sets for specific implementation domains
- Letting the coding agent choose prompts

Additional use cases include:

- Guiding and stabilizing code generated by coding agents
- Executing highly abstract implementations with reproducibility

Deno is used for advanced usage. Climpt is optimized and provided as multiple Deno execution commands. The prepared execution commands can switch profiles.

## Setup

### Initial Setup

Climpt requires `.agent/climpt/config/default-app.yml`.
Usually, running `climpt init` at the project root will generate this file.

You can also install it at any hierarchy, such as under `tests/`. However, it is more convenient to manage multiple executables under `.deno/bin/*`.

### Multiple Installation Configuration

Profile switching is done with the `--config` option. When calling Deno, add `--config=profilename`.

This enables the following:

First, prepare multiple calls with different `--config` under `.deno/bin`.

```
.deno/bin
├── climpt-arch         # --config=arch
├── climpt-breakdown    # --config=breakdown
├── climpt-build        # --config=build
├── climpt-diagnose     # --config=diagnose
├── climpt-research     # --config=research
├── climpt-setup        # --config=setup
└── climpt-verify       # --config=verify
```

Next, prepare corresponding configuration files. The * part of `*-app.yml` is the profile name. You can change the accepted argument specification for each profile. For example, `arch` can run `climpt-arch optimize go`, but you can make it so that `climpt-setup optimize go` cannot be executed.

```
.agent/climpt
├── config
│   ├── arch-app.yml
│   ├── arch-user.yml
│   ├── breakdown-app.yml
│   ├── breakdown-user.yml
│   ├── build-app.yml
│   ├── build-user.yml
```

Finally, prepare template prompts. The location of prompts can be switched by configuration, so you can change the storage hierarchy for each profile. In the example below, the same `prompts/` hierarchy is divided by profile name.

```
.agent/climpt
├── prompts
│   ├── arch
│   │   └── optimize
│   │       └── go
│   │           └── f_default.md
│   ├── breakdown
│   │   └── to
│   │       ├── issue
│   │       │   ├── f_default.md
│   │       │   ├── f_detailed.md
│   ├── diagnose
│   │   └── trace
│   │       └── stack
│   │           └── f_test.md
│   ├── setup
│   │   └── climpt
│   │       └── list
│   │           └── f_default.md
```

### Operation

Add frequently used prompt files to the prompt hierarchy. Important prompts for the project should be placed under Git management.

Prompts can use template variables for substitution.

``````markdown
# Error Handling Policy

Errors are categorized by type, and policies are considered. Then, files are separated by error type and saved to the output destination. The maximum number of lines per file is {uv-max-line-num}.

Output destination: `{destination_path}`


# Error Content

`````
{input_text}
`````
``````

When you run the following CLI against the above template, the values will be replaced:

```
echo "something error" | climpt-diagnose trace stack --input=test -o=./tmp/abc --uv-max-line-num=3
```

### Update

To update to the latest version, simply run the same installation command again:

```bash
deno install --allow-read --allow-write --allow-net --allow-env --global climpt jsr:@aidevtool/climpt
```

### Uninstall

#### For global installation

```bash
deno uninstall climpt
```

#### For local (project) installation

```bash
deno uninstall --root .deno climpt
```
- Use `--root .deno` to uninstall from the project's `.deno/bin` directory.

### Notes

- The climpt command automatically uses `cli.ts` as the entry point due to the `bin` configuration in `deno.json`.
- Deno 2.4 or later is recommended.
- For detailed usage instructions, refer to the "Usage" section above.

### Local Installation to Project Directory

If you want to use the climpt command only within a specific project, you can install it to `.deno/bin` using the `--root` option:

```bash
deno install --allow-read --allow-write --allow-net --allow-env --global --root .deno -n climpt jsr:@aidevtool/climpt
```

After installation, add the bin directory to your PATH:

```bash
export PATH="$(pwd)/.deno/bin:$PATH"
```

To make this setting persistent, add it to your shell configuration file (e.g., `~/.zshrc` or `~/.bashrc`).

## Architecture

Climpt is designed as a lightweight wrapper around the `@tettuan/breakdown` package, providing a unified CLI interface while maintaining all the functionality of the underlying breakdown tools.

## Requirements

- Deno 2.4 or later (recommended)
- Internet connection (for JSR package downloads)

> **Note:** Deno 2.x is recommended.

## License

MIT License - see LICENSE file for details.

## Contributing

This project is a wrapper around the breakdown package. For core functionality improvements, please refer to the breakdown package repository.
